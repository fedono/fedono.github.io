怎么去做一个 JSON渲染的工具，周边需要哪些工具，JSON 工具主要的功能点有哪些

## 主要功能点

- JOSN 渲染，这个当然不言自明

  - schema 规范，每个都有自己书写 schema 的规则

- 表单验证

- 数据联动

  - 字符串表达式的解析，如何解析

- hooks 

  > 需要有哪些的 hooks ？
  >
  > hooks 也算生命周期的一部分

- 生命周期

- 性能优化

  - 会遇到哪些性能问题，如何来解决
  - 所有的需要解决性能优化的点，都可以写下来
    - amis 的解决方案：一个页面有太多的组件，那么渲染肯定会有卡顿，通过设置在可视化区域中进行展示，就可以解决
    - formily 的解决方案：通过将单个的 formItem 的数据变更导致的组件更新进行隔离，这时候不会通过 onChange 操作引发整个 form 的变化，这时候就能起到性能优化的作用



## 周边工具

### 可视化编辑器

> 用户手写JSON 肯定不方便友好，所以肯定需要可视化编辑器来做自动化的生成 JSON 

## 功能拓展

### 可视化拖拽

- 可视化拖拽是一个点，那既然我有一个页面，需要可视化拖拽非常多的组件进来，然后配置，可不可以有简便的方案
  - amis 就有一个快速生成页面的过程
    - 通过连接数据库，获取字段名称，然后手动选择需要展示哪些字段，字段在页面中的展示名称，字段在页面中使用什么组件进行渲染，生成后端的Node 的增删改查的代码
  - 也就是既然一个页面需要拖拽非常多的组件，那么在拖拽之前，我们就可以快速配置完成初始的状态
    - 初始的状态也就是有哪些字段，这些字段在页面中需要展示的名称，这些字段使用什么表单来展示
    - 那么我们在选择一个表单的时候，这时候提供一个快速操作的按钮，点击这个快速操作，我们弹出一个弹窗
    - 这个弹窗中就可以填写字段名，字段的展示名称，字段展示所需要的组件名称，然后可以拖拽布局
      - 也就是在这一步，我们就能够做好布局，所有的表单组件的字段、字段的组件，这一步就能减少很多的拖拽步骤了。
    - 上面这一步做好了之后，也就是初步的 form 做好了，然后点击确定，关闭弹窗，这时候就可以点击每个表单组件进行具体的配置了

### 自定义组件注册

- JSON 渲染工具如果要做成一个服务，必不可少的一个点就是可以提供用户自定义组件
  - 因为本身提供的组件一定是有限的，业务的功能点非常多，组件是很难覆盖的，所以需要提供注册的机制，提供给用户进行注册

### 主题自定义

- 
  - 类似开源的 JSON 渲染器，如果要接入到业务中进行使用，那么业务本身就会有设计风格，那么如何进行接入，就需要业务方的开发者根据设计稿，设定业务方的主题
  - 所以主题的设定也一定要是非常方便来定制的，在日常做开源的时候，就需要能够设计好当前的form工具的主题能够非常好的覆盖，所以amis 的设定方案应该是挺好的，可以外部非常好的注册以及覆盖

### 物料

- 既然是使用 json 来渲染页面，那么JSON本身就是可以封装的，参考下 `fusion` 的[物料体系设计 ](https://fusion.design/mc) 以及 ice 的物料设计
- 

## 竞品分析

- formily
- form-render
- AList
- redux-final-form
- [react-hook-form](https://react-hook-form.com/get-started)
- [form-create](https://github.com/xaboy/form-create) 
- 可以基于 github 的 topic 来搜索，如 [form-builder](https://github.com/topics/form-builder) 中有非常多的自动生成表单的方案